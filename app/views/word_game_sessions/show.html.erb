<div class="max-w-md mx-auto mt-8">
  <h2 class="text-2xl font-bold mb-4">Word Game</h2>
  
  <% if @current_word %>
    <div data-controller="word-game" 
         data-word-game-word-id-value="<%= @current_word.id %>" 
         data-word-game-session-id-value="<%= @word_game_session.id %>"
         data-word-game-total-words-value="<%= @word_game_session.words.count %>"
         data-word-game-current-index-value="<%= @word_game_session.current_word_index %>"
         data-action="keydown@window->word-game#handleKeydown">
      
      <div class="mb-4 bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
        <div class="bg-blue-600 h-2.5 rounded-full" style="width: 0%;" data-word-game-target="progressBar"></div>
      </div>
      <p class="text-sm text-gray-500 mb-4" data-word-game-target="progressText">Word 1 of <%= @word_game_session.words.count %></p>

      <p class="text-lg mb-2">Translate the following hiragana:</p>
      <p class="text-4xl font-bold mb-4"><%= @current_word.hiragana %></p>
      
      <%= form_with url: word_game_session_path(@word_game_session), method: :patch, data: { action: "submit->word-game#checkAnswer" } do |f| %>
        <%= f.text_field :answer, class: "w-full p-2 border rounded mb-4", placeholder: "Enter romanji", data: { "word-game-target": "input" } %>
        <%= f.submit "Submit", class: "bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded" %>
      <% end %>
      
      <div data-word-game-target="result" class="mt-4"></div>
      <div data-word-game-target="meaning" class="mt-4 hidden">
        <p class="font-bold">English Meaning: <span data-word-game-target="englishMeaning"></span></p>
        <p class="font-bold">Kanji: <span data-word-game-target="kanji"></span></p>
      </div>
      <button data-action="click->word-game#nextWord keydown->word-game#nextWord" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded mt-4 hidden" data-word-game-target="nextButton">Next</button>
    </div>
  <% else %>
    <p class="text-lg">Game Over! You've completed all the words.</p>
    <p class="mt-4">
      Correct answers: <%= @word_game_session.right_answers.count %><br>
      Wrong answers: <%= @word_game_session.wrong_answers.count %>
    </p>
    <%= link_to "Play Again", init_word_game_sessions_path, class: "bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded mt-4 inline-block" %>
  <% end %>
</div>